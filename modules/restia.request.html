<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Restia</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>Restia</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
<li><a href="#Getters">Getters </a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/restia.attributes.html">restia.attributes</a></li>
  <li><a href="../modules/restia.bin.manpage.html">restia.bin.manpage</a></li>
  <li><a href="../modules/restia.callsign.html">restia.callsign</a></li>
  <li><a href="../modules/restia.commands.html">restia.commands</a></li>
  <li><a href="../modules/restia.config.html">restia.config</a></li>
  <li><a href="../modules/restia.controller.html">restia.controller</a></li>
  <li><a href="../modules/restia.markdown.html">restia.markdown</a></li>
  <li><a href="../modules/restia.negotiator.html">restia.negotiator</a></li>
  <li><strong>restia.request</strong></li>
  <li><a href="../modules/restia.secret.html">restia.secret</a></li>
  <li><a href="../modules/restia.template.html">restia.template</a></li>
  <li><a href="../modules/restia.utils.html">restia.utils</a></li>
</ul>
<h2>Scripts</h2>
<ul class="nowrap">
  <li><a href="../scripts/restia.html">restia</a></li>
</ul>
<h2>Topics</h2>
<ul class="">
  <li><a href="../topics/readme.md.html">readme</a></li>
  <li><a href="../topics/license.md.html">license</a></li>
  <li><a href="../topics/getting-started.md.html">getting-started</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>restia.request</code></h1>
<p>A helper "object" that provides common request-related information as
 attributes.</p>
<p> Most functions are either reasonably fast or memoized, so the
 user does not need to take care of caching values outside of very critical
 code.</p>
    <h3>Usage:</h3>
    <ul>
        <pre class="example">local req = restia.request
-- restia.controller.xpcall passes this as its first argument automatically
if req.method == &quot;GET&quot; then
	ngx.say(json.encode({message=&quot;Greetings from &quot;..params.host..&quot;!&quot;}))
else
	ngx.say(json.encode(req.params))
end
</pre>
    </ul>
    <h3>Info:</h3>
    <ul>
        <li><strong>License</strong>: Unlicense</li>
        <li><strong>Author</strong>: DarkWiiPlayer</li>
    </ul>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#offer">offer (available)</a></td>
	<td class="summary">"Offers" a set of content types during content negotiation.</td>
	</tr>
</table>
<h2><a href="#Getters">Getters </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#params">params ()</a></td>
	<td class="summary">Returns the request parameters.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#method">method ()</a></td>
	<td class="summary">Returns the HTTP method of the current request.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#headers">headers ()</a></td>
	<td class="summary">Returns a table containing all headers.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#type">type ()</a></td>
	<td class="summary">An alias for headers.content_type.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#host">host ()</a></td>
	<td class="summary">Returns the current hostname or address.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#path">path ()</a></td>
	<td class="summary">Returns the path part of the current request URI</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#cookie">cookie ()</a></td>
	<td class="summary">Wraps the lua-resty-cookie module and returns a cookie object for the current request.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Functions"></a>Functions</h2>

    <dl class="function">
    <dt>
    <a name = "offer"></a>
    <strong>offer (available)</strong>
    </dt>
    <dd>
    "Offers" a set of content types during content negotiation.
 Given a set of possible content types, it tries figuring out what the client
 wants and picks the most fitting content handler. Automatically runs the
 handler and sends the result to the client. See <a href="../modules/restia.negotiator.html#pick">restia.negotiator.pick</a> for
 how to pass the handlers.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">available</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.6">table</a></span>
         A map from content-types to handlers. Either as a plain key-value map or as a sequence of key-value pairs in the form of two-element sequences.
        </li>
    </ul>





</dd>
</dl>
    <h2 class="section-header "><a name="Getters"></a>Getters </h2>

    <dl class="function">
    <dt>
    <a name = "params"></a>
    <strong>params ()</strong>
    </dt>
    <dd>
    Returns the request parameters.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.6">table</a></span>
        A table containing the request parameters.
    </ol>




</dd>
    <dt>
    <a name = "method"></a>
    <strong>method ()</strong>
    </dt>
    <dd>
    Returns the HTTP method of the current request.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.4">string</a></span>
        Method The request method
    </ol>




</dd>
    <dt>
    <a name = "headers"></a>
    <strong>headers ()</strong>
    </dt>
    <dd>
    Returns a table containing all headers.
 For missing headers, it tries replacing underscores with dashes.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.6">table</a></span>
        Headers
    </ol>




</dd>
    <dt>
    <a name = "type"></a>
    <strong>type ()</strong>
    </dt>
    <dd>
    An alias for headers.content_type.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.4">string</a></span>
        Content type header
    </ol>




</dd>
    <dt>
    <a name = "host"></a>
    <strong>host ()</strong>
    </dt>
    <dd>
    Returns the current hostname or address.



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.4">string</a></span>
        Hostname or Address
    </ol>




</dd>
    <dt>
    <a name = "path"></a>
    <strong>path ()</strong>
    </dt>
    <dd>
    Returns the path part of the current request URI



    <h3>Returns:</h3>
    <ol>

           <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.4">string</a></span>
        Path part of the URI
    </ol>




</dd>
    <dt>
    <a name = "cookie"></a>
    <strong>cookie ()</strong>
    </dt>
    <dd>
    Wraps the lua-resty-cookie module and returns a cookie object for the current request.



    <h3>Returns:</h3>
    <ol>

        Cookie object
    </ol>




</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2020-06-25 11:22:40 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
