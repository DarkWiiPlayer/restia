<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>Restia</title>
    <link rel="stylesheet" href="../ldoc.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>Restia</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
<li><a href="#Tables">Tables</a></li>
<li><a href="#HTML_Builder_Environment">HTML Builder Environment </a></li>
</ul>


<h2>Modules</h2>
<ul class="nowrap">
  <li><a href="../modules/restia.callsign.html">restia.callsign</a></li>
  <li><a href="../modules/restia.commands.html">restia.commands</a></li>
  <li><a href="../modules/restia.config.html">restia.config</a></li>
  <li><a href="../modules/restia.controller.html">restia.controller</a></li>
  <li><a href="../modules/restia.markdown.html">restia.markdown</a></li>
  <li><a href="../modules/restia.negotiator.html">restia.negotiator</a></li>
  <li><a href="../modules/restia.secret.html">restia.secret</a></li>
  <li><strong>restia.template</strong></li>
  <li><a href="../modules/restia.utils.html">restia.utils</a></li>
</ul>
<h2>Scripts</h2>
<ul class="nowrap">
  <li><a href="../scripts/restia.html">restia</a></li>
</ul>
<h2>Topics</h2>
<ul class="">
  <li><a href="../topics/readme.md.html">readme</a></li>
  <li><a href="../topics/license.md.html">license</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>restia.template</code></h1>
<p>Template module.</p>
<p> Sets up an xhMoon environment and adds the utility functions.</p>
    <h3>Info:</h3>
    <ul>
        <li><strong>License</strong>: Unlicense</li>
        <li><strong>Author</strong>: DarkWiiPlayer</li>
    </ul>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#inject">inject (fn)</a></td>
	<td class="summary">Allows injecting code directly into the language environment.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#require">require (modname)</a></td>
	<td class="summary">Requires a module in a similar way to Luas <a href="../modules/restia.template.html#require">require</a> function,
 but evaluates the code in the MoonXML language environment.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#loadlua">loadlua (code, filename)</a></td>
	<td class="summary">Loads a template from lua code.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#loadmoon">loadmoon (code, filename)</a></td>
	<td class="summary">Loads a template from moonscript code.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#render">render (...)</a></td>
	<td class="summary">Renders the template to a buffer table</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#print">print (...)</a></td>
	<td class="summary">Renders a table and directly sends it to nginx</td>
	</tr>
</table>
<h2><a href="#Tables">Tables</a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#loaded">loaded</a></td>
	<td class="summary">Stores required modules just like <a href="https://www.lua.org/manual/5.3/manual.html#pdf-package.loaded">package.loaded</a> does for normal Lua modules.</td>
	</tr>
</table>
<h2><a href="#HTML_Builder_Environment">HTML Builder Environment </a></h2>
<table class="function_list">
	<tr>
	<td class="name" nowrap><a href="#stylesheet">stylesheet (uri, async)</a></td>
	<td class="summary">Embeds a stylesheet into the document.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#html5">html5 ()</a></td>
	<td class="summary">Renders a HTML5 doctype in place.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#ulist">ulist (list)</a></td>
	<td class="summary">Renders an unordered list.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#olist">olist (list)</a></td>
	<td class="summary">Renders an ordered list.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#vtable">vtable (...)</a></td>
	<td class="summary">Renders a table (vertical).</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#ttable">ttable (opt, ...)</a></td>
	<td class="summary">Renders a table.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#lua">lua (code)</a></td>
	<td class="summary">Renders a script tag from Lua code to be used by fengari.</td>
	</tr>
	<tr>
	<td class="name" nowrap><a href="#moon">moon (code)</a></td>
	<td class="summary">Renders a script tag from Moonscript code to be used by fengari.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Functions"></a>Functions</h2>

    <dl class="function">
    <dt>
    <a name = "inject"></a>
    <strong>inject (fn)</strong>
    </dt>
    <dd>
    Allows injecting code directly into the language environment.
 This should only be used for very short snippets;
 using <a href="../modules/restia.template.html#require">template.require</a> is preferred.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">fn</span>
            <span class="types"><span class="type">function</span></span>
         A function that gets called with the language environment.
        </li>
    </ul>





</dd>
    <dt>
    <a name = "require"></a>
    <strong>require (modname)</strong>
    </dt>
    <dd>
    Requires a module in a similar way to Luas <a href="../modules/restia.template.html#require">require</a> function,
 but evaluates the code in the MoonXML language environment.
 This allows writing specialized MoonHTML macros to avoid
 code duplication in views. As with <code>requier</code>, <a href="https://www.lua.org/manual/5.3/manual.html#pdf-package.path">package.path</a> is
 used to look for Lua modules.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">modname</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.4">string</a></span>
         The name of the module.
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        module The loaded module. In other words, the return value of the evaluated Lua file.
    </ol>




</dd>
    <dt>
    <a name = "loadlua"></a>
    <strong>loadlua (code, filename)</strong>
    </dt>
    <dd>
    Loads a template from lua code.
 The code may be compiled bytecode.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">code</span>



        </li>
        <li><span class="parameter">filename</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "loadmoon"></a>
    <strong>loadmoon (code, filename)</strong>
    </dt>
    <dd>
    Loads a template from moonscript code.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">code</span>



        </li>
        <li><span class="parameter">filename</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "render"></a>
    <strong>render (...)</strong>
    </dt>
    <dd>
    Renders the template to a buffer table


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>



        </li>
    </ul>





</dd>
    <dt>
    <a name = "print"></a>
    <strong>print (...)</strong>
    </dt>
    <dd>
    Renders a table and directly sends it to nginx


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>



        </li>
    </ul>





</dd>
</dl>
    <h2 class="section-header "><a name="Tables"></a>Tables</h2>

    <dl class="function">
    <dt>
    <a name = "loaded"></a>
    <strong>loaded</strong>
    </dt>
    <dd>
    Stores required modules just like <a href="https://www.lua.org/manual/5.3/manual.html#pdf-package.loaded">package.loaded</a> does for normal Lua modules.







</dd>
</dl>
    <h2 class="section-header has-description"><a name="HTML_Builder_Environment"></a>HTML Builder Environment </h2>

          <div class="section-description">
           Automatically has access to the Restia library in the global variable 'restia'.
          </div>
    <dl class="function">
    <dt>
    <a name = "stylesheet"></a>
    <strong>stylesheet (uri, async)</strong>
    </dt>
    <dd>
    Embeds a stylesheet into the document.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">uri</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.4">string</a></span>
         The URI to the stylesheet
        </li>
        <li><span class="parameter">async</span>
            <span class="types"><span class="type">boolean</span></span>
         Load the stylesheet asynchronously and apply it once it's loaded
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">stylesheet <span class="string">'styles/site.css'</span>
stylesheet <span class="string">'styles/form.css'</span>, <span class="keyword">true</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "html5"></a>
    <strong>html5 ()</strong>
    </dt>
    <dd>
    Renders a HTML5 doctype in place.






    <h3>Usage:</h3>
    <ul>
        <pre class="example">html5()</pre>
    </ul>

</dd>
    <dt>
    <a name = "ulist"></a>
    <strong>ulist (list)</strong>
    </dt>
    <dd>
    Renders an unordered list.
 List elements can be any valid MoonHTML data object,
 including functions and tables.
 They get passed directly to the <code>li</code> function call.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">list</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.6">table</a></span>
         A sequence containing the list elements
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">ulist {
	<span class="string">'Hello'</span>
	<span class="string">'World'</span>
	-&gt;
		br <span class="string">'foo'</span>
		<span class="global">print</span> <span class="string">'bar'</span>
	<span class="string">'That was a list'</span>
}</pre>
    </ul>

</dd>
    <dt>
    <a name = "olist"></a>
    <strong>olist (list)</strong>
    </dt>
    <dd>
    Renders an ordered list.  Works like ulist.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">list</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.6">table</a></span>
         A sequence containing the list elements
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="../modules/restia.template.html#ulist">ulist</a>
    </ul>


</dd>
    <dt>
    <a name = "vtable"></a>
    <strong>vtable (...)</strong>
    </dt>
    <dd>
    Renders a table (vertical).


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">...</span>
         A list of rows (header rows can be marked by setting the <code>header</code> key)
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">vtable(
	{<span class="string">'Name'</span>, <span class="string">'Balance'</span>, header = <span class="keyword">true</span>},
	{<span class="string">'John'</span>, <span class="string">'500 €'</span>}
)</pre>
    </ul>

</dd>
    <dt>
    <a name = "ttable"></a>
    <strong>ttable (opt, ...)</strong>
    </dt>
    <dd>
    Renders a table.  Expects a sequence of keys as its first argument.
 Additional options can also be passed into the first table.
 Following arguments will be interpreted as key/value maps.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">opt</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.6">table</a></span>
         A sequence containing the keys to be rendered.
        </li>
        <li><span class="parameter">...</span>
         A list of tables
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">ttable(
	{<span class="string">'name'</span>, <span class="string">'age'</span>, <span class="string">'address'</span>, number: <span class="keyword">true</span>, header: <span class="keyword">true</span>, caption: -&gt; h1 <span class="string">'People'</span>}
	{name: <span class="string">"John Doe"</span>, age: -&gt; i <span class="string">'unknown'</span>, address: -&gt; i <span class="string">'unknown'</span>}
)</pre>
    </ul>

</dd>
    <dt>
    <a name = "lua"></a>
    <strong>lua (code)</strong>
    </dt>
    <dd>
    Renders a script tag from Lua code to be used by fengari.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">code</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.4">string</a></span>
         The content of the script tag (Lua code).
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">lua <span class="string">[[
	print "Hello, World!"
]]</span></pre>
    </ul>

</dd>
    <dt>
    <a name = "moon"></a>
    <strong>moon (code)</strong>
    </dt>
    <dd>
    Renders a script tag from Moonscript code to be used by fengari.
 The code is first stripped of additional indentation and converted to Lua.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">code</span>
            <span class="types"><a class="type" href="https://www.lua.org/manual/5.3/manual.html#6.4">string</a></span>
         The content of the script tag (Moonscript code).
        </li>
    </ul>




    <h3>Usage:</h3>
    <ul>
        <pre class="example">lua <span class="string">[[
	print "Hello, World!"
]]</span></pre>
    </ul>

</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.6</a></i>
<i style="float:right;">Last updated 2020-04-15 08:59:11 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
